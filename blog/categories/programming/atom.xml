<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: programming, | Ramblin's]]></title>
  <link href="http://cmr.github.io/blog/categories/programming/atom.xml" rel="self"/>
  <link href="http://cmr.github.io/"/>
  <updated>2013-06-23T08:05:22-04:00</updated>
  <id>http://cmr.github.io/</id>
  <author>
    <name><![CDATA[Corey Richardson]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[How I got started hacking rustc, and how you can too!]]></title>
    <link href="http://cmr.github.io/blog/2013/06/22/how-i-got-started-with-rust/"/>
    <updated>2013-06-22T14:58:00-04:00</updated>
    <id>http://cmr.github.io/blog/2013/06/22/how-i-got-started-with-rust</id>
    <content type="html"><![CDATA[<p><em>This is the first part of a planned series about <code>rustc</code>, the Rust compiler</em></p>

<p>I remember first hearing about Rust during the summer of 2011. In fact, I
remember the exact moment. I was at MIT, doing their Junction program. It was
during a seminar about semiconductors. I remember browsing through the source on github,
getting lost, and going home.</p>

<!-- more -->


<p>Fast forward to two months ago. A <a href="http://tech.slashdot.org/story/13/04/03/1646234/mozilla-and-samsung-collaborating-to-bring-new-browser-engine-to-android">slashdot post</a> appears, bringing Rust
back to the forefront of my consciousness. By this point I&rsquo;d actually gained
some programming chops, gotten a job, etc. I read through the Wikipedia
article, though &ldquo;hey, this looks like it has potential,&rdquo; and forgot about it.</p>

<p>Fast forward a week or two. The <a href="http://www.matasano.com/articles/crypto-challenges/">matasano crypto challenges</a> were linked
on HN. &ldquo;Our friend Maciej says these challenges are a good way to learn a new
language, so maybe now&rsquo;s the time to pick up Clojure or Rust.&rdquo; And pick up
Rust I did. Rust was a pretty easy language to get started with, with my
predominantly Python, C, and Lua background. Especially for the crypto
challenges, which start off fairly basic.</p>

<h1>First, some warnings:</h1>

<p>Rust is pre-alpha software. Backwards incompatible changes happen <em>weekly</em>,
either in the libraries, or in the language.  It&rsquo;s probably best to not write
any &ldquo;serious&rdquo; code in Rust right now, unless you plan on fixing it every few
weeks to keep up with the language. The nice part about contributing code to
the compiler is that when someone changes the language or a library, it is
their job to fix the code that uses it.</p>

<p>Make sure to use the <code>master</code> branch, and <strong>use the doc links under &ldquo;Trunk&rdquo;.
It will save you pain.</strong> Nothing is worse than accidentally using the 0.6
documentation and finding that a method has been renamed or removed, and
getting confused when the build fails halfway through.</p>

<p><strong>The Rust compiler is poorly written.</strong> This is an artifact of being written
in Rust, which, as stated, changes rapidly. Some code is very old, and uses
very old idioms, or doesn&rsquo;t use newer language features that would be cleaner
and easier to read. If you notice this, try and fix it! If you notice it, that
means you already more-or-less know what needs to be done to clean it up a
bit. If the change is very invasive, it&rsquo;s probably best to open an issue and
let an experienced dev deal with it. An example of a cleanup is <a href="https://github.com/mozilla/rust/pull/7315">pull request
7315</a>, which cleaned up indentation
and replaced some <code>if</code>s with <code>match</code>es.</p>

<p>Do not, repeat, <em>not</em>, use the <code>rustc</code> code as a source of &ldquo;how to write
Rust.&rdquo; Almost all of it is bad code. I don&rsquo;t even know where to tell you to
look to find consistently good code.  The upside is that generally reviewers
will catch suboptimal code, and suggest improvements.  <a href="https://github.com/mozilla/rust/pull/7207">This pull request, for
example</a>, used some old Rust
idioms, which the reviewers suggested fixes for. So feel free to get
elbow-deep in code without worrying <em>too</em> much about whether the code you&rsquo;re
writing is good or bad. General guidelines: avoid <code>@</code> always, avoid <code>~</code>
usually, use <code>Option</code> and <code>Result</code>, handle errors. That will guide you
straight most of the time, and by the time you know when to ignore those, you
probably already know what good Rust code is.</p>

<h1>Getting started</h1>

<p>The first thing I did was, of course, go to the <a href="http://www.rust-lang.org/">home page</a>. I read the
feature summary (which seemed mostly unchanged from when I first saw it.
Indeed, looking in the wayback machine, it is mostly unchanged). I read the
example, and clicked <a href="http://static.rust-lang.org/doc/tutorial.html">&ldquo;tutorial&rdquo;</a> over on the left. I built the compiler
while doing this. There are instructions for building Rust over at [the</p>

<pre><code>wiki](https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust).
</code></pre>

<p>It&rsquo;s a lot easier to get started if you&rsquo;re using Linux or Mac, though not
impossible on Windows (just a bit more setup and waiting).</p>

<p>The tutorial left me confused and alone, and I&rsquo;m sure it did the same to
you. But it gave me enough information that I could write a base64 encode and
decoder, although I constantly referenced the tutorial. By this point I had
moved on to the second matasano challenge, and I found my first compiler bug:
<a href="https://github.com/mozilla/rust/pull/6072">really poor error messages</a>. Of course I had to fix this! Error
messages are easy, right?</p>

<p>Yes and no. With a codebase as large and complex as a compiler, there are many
layers of stuff you need to pick apart to figure out the cause and fix of an
issue. In my case, it was easy, just grep for the error message. The fix,
however, was more complex. I had to figure out how to turn a &ldquo;span&rdquo; (the
compiler&rsquo;s way of matching up an AST node with a chunk of source code) in a
string. Often you&rsquo;ll need to go digging through other files to figure out what
you can do, what data structures there are, etc.</p>

<p><strong>Rust makes this easy!</strong> There are no IDEs or any fancy tools, but Rust
source is insanely <code>grep</code>able. You see a method call like
<code>parser.parse_ident(...)</code>, you just need to grep for <code>fn parse_ident</code>.
Of course, actually understanding what the method does is a whole new can of
worms&hellip;</p>

<h1>Picking an issue to fix</h1>

<p>I think the best way to pick an issue to fix is to fix a bug you encounter
yourself. Ask in IRC about it, often someone will be online that either knows
about it and can point you in the right direction, or at the very least help
reproduce, debug, and sift through the issue trcker.</p>

<p>There is the <a href="https://github.com/mozilla/rust/issues?labels=E-easy"><code>E-easy</code></a>
label on certain issues. This are issues that shouldn&rsquo;t take too much trickery
to get done, though they might take some time to get &ldquo;acclimated&rdquo; to the
codebase. <code>E-easy</code> doesn&rsquo;t mean fast, it means easy. It might be tedius or
take non-trivial amounts of effort, but it shouldn&rsquo;t require overarching
design issues or a lot of knowledge about rust or rust internals.</p>

<p>Documentation always needs writing. Open a random file from libstd or
libextra, look for functions, structs, enums, and traits that aren&rsquo;t
documented. You&rsquo;ll get to see a bunch of Rust code, probably using features
you wouldn&rsquo;t otherwise see writing &ldquo;normal&rdquo; code.</p>

<p>Feel free to ping me (cmr) on IRC for help!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[This Week in Rust]]></title>
    <link href="http://cmr.github.io/blog/2013/06/22/this-week-in-rust/"/>
    <updated>2013-06-22T05:21:00-04:00</updated>
    <id>http://cmr.github.io/blog/2013/06/22/this-week-in-rust</id>
    <content type="html"><![CDATA[<p>Hello and welcome to the third issue of <em>This Week in Rust</em>, a weekly overview
of Rust and its community.</p>

<p>It has come to my attention that Github does not categorize some
merged-by-bors pull requests as &ldquo;merged&rdquo; and instead categorizes it as
&ldquo;closed&rdquo;. This skews the numbers and also the PRs that I looked through for
inclusion into twir. I&rsquo;ll no longer be including issue churn/PR numbers, and I
hope I didn&rsquo;t miss any import PRs in the last two issues.</p>

<!-- more -->


<h1>What&rsquo;s cooking in incoming?</h1>

<p>The last of the tree breakage has been cleaned up. The mysterious stack
corruption was traced down by Blei to occur in jemalloc. It has been disabled
until the real cause of the error is found. A bunch more buildbot
configurations have been turned on for auto, to fend off more breakage. The
tree is open, and aatch got out a new snapshot!</p>

<p>Most of the work this week is cleanup and preparation for 0.7, but since the
tree has been closed (and the extra auto buildbots lengthen the time it takes
for a PR to be tested for the day it has been open), not much has landed these
past few days, but a bunch happened earlier this week.</p>

<h2>Notable additions, bugfixes, and cleanup</h2>

<ul>
<li>doener made compiles faster by emitting less useless copies and allocations
in <a href="https://github.com/mozilla/rust/pull/7259">7259</a></li>
<li>aatch landed <a href="https://github.com/mozilla/rust/pull/7124">part 1</a> and <a href="https://github.com/mozilla/rust/pull/7182">part
2</a> of his huge trans refactor
effort, which make trans faster and less terrible.</li>
<li>sully got <a href="https://github.com/mozilla/rust/pull/7203">default methods</a>
less broken</li>
<li>yichoi landed a <a href="https://github.com/mozilla/rust/pull/7128">bunch</a> of
Android fixes.</li>
<li>vadimcn has <a href="https://github.com/mozilla/rust/pull/7134">fixed debuginfo</a>,
which is super amazing. This makes it a lot easier for the GSoC student (mw)
to get started.</li>
<li>doener has <a href="https://github.com/mozilla/rust/pull/7186">fixed</a> some
pathological behavior in how codegen creates cleanup blocks. This makes the
IR better, reducing compile time, and also allowing better optimization,
reducing binary size.</li>
</ul>


<p><blockquote><p>They reduce compile times by about 10% in total.</p><footer><strong>@dotdash <a href="https://github.com/mozilla/rust/pull/7259">https://github.com/mozilla/rust/pull/7259</a></strong></footer></blockquote></p>

<p><blockquote><p>Reduces the size of librustc by about 5% and the time required to build<br/>it by about 10%.</p><footer><strong>@dotdash <a href="https://github.com/mozilla/rust/pull/7186">https://github.com/mozilla/rust/pull/7186</a></strong></footer></blockquote></p>

<p><blockquote><p>The resulting code for rustc is about 13% faster (measured up to and<br/>including the &ldquo;trans&rdquo; pass) and the resulting librustc is about 5%<br/>smaller.</p><footer><strong>@dotdash <a href="https://github.com/mozilla/rust/pull/7154">https://github.com/mozilla/rust/pull/7154</a></strong></footer></blockquote></p>

<h2>Breaking changes</h2>

<p>strcat <a href="https://github.com/mozilla/rust/pull/7263">continues</a>
<a href="https://github.com/mozilla/rust/pull/7162">work</a> with iterators. The changes
that landed are vector cleanups. Probably most importantly, the <code>each</code> and
<code>eachi</code> methods are being removed. The <code>eachi</code> removal landed but the <code>each</code>
one broke bors, so it&rsquo;s currently in limbo. The current replacement is:</p>

<p><code>
// each
for your_vec.iter().advance |element| {
  ...
}
// eachi
for your_vec.iter().enumerate().advance |(i, element)| {
  ...
}
</code></p>

<p>Once the rest of the iterator work is hashed out and lands, it will just be</p>

<p><code>
// each
for your_vec |element| {
  ...
}
// eachi
for your_vec.enumerate() |(i, element)| {
  ...
}
</code></p>

<p>although the syntax might be slightly different (<code>for element in your_vec</code> is
my favorite proposal).</p>

<h1>Meetings</h1>

<p>The <a href="https://github.com/mozilla/rust/wiki/Meeting-weekly-2013-06-18">Tuesday
meeting&rsquo;s</a>
main topics were once fn&rsquo;s and how namespaces work. For once fn&rsquo;s, graydon
says &ldquo;I&rsquo;m concerned with adding new features and I want to see if we can live
without it, I understand it is common,&rdquo; not yet making a decision to include
them in the language.</p>

<h1>Meetups</h1>

<ul>
<li>tjc&rsquo;s pre-talk and talk, &ldquo;Rust: A Friendly Introduction&rdquo; went very well. The
<a href="http://catamorphism.org/Writing/Rust-Tutorial-tjc.pdf">slides</a> are up, and
a recording is coming soon (hopefuly). tjc says the slides aren&rsquo;t as
understanable without the audio of the talk.</li>
<li>nmatsakis has expressed willingness/interest in a Boston meetup sometime. If
you&rsquo;re interested, contact him on IRC or the ML.</li>
</ul>


<h1>Notable discourse and external projects</h1>

<ul>
<li><a href="http://maniagnosis.crsr.net/2013/06/mmap-and-rust-foreign-function-interface.html">mmap and the Rust FFI</a>
(indutny is working on mman bindings in libc, for the record. will mention
in next week&rsquo;s twir when it lands)</li>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2013-June/004480.html">code generation and rustc speed</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/1gs93k/rust_for_game_development/">Rust for game development?</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/1grj61/feed_us_some_low_hanging_fruit/">Feed us some low hanging fruit!</a></li>
<li><a href="http://aatch.github.io/blog/2013/06/19/paying-technical-debt-in-rustc/">Paying Technical Debt in rustc</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/1gpbcs/what_issues_in_rust_today_effect_you_most/">What issues in Rust today effect (sic) you most?</a></li>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2013-June/004520.html">rustdoc rewrite and redesign</a></li>
<li><a href="http://www.reddit.com/r/rust/comments/1gmac5/linux_rustbench_a_tool_for_profiling_memory_usage/">rust-bench: a tool for profiling memory usage</a></li>
</ul>


<h1>Other announcements</h1>

<ul>
<li>Michael Woerister (mw), the GSoC student working on debug info, has begun
work. His <a href="http://michaelwoerister.github.io/">project log</a> will be updated
weekly. I&rsquo;m looking forward to a much better debug experience.</li>
</ul>

]]></content>
  </entry>
  
</feed>
